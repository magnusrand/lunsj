<!DOCTYPE html>
<html lang="no">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alle lunsjsteder - Lunsj</title>
    <link rel="stylesheet" href="styles.css" />
    <script
      src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.7/dist/htmx.min.js"
      integrity="sha384-ZBXiYtYQ6hJ2Y0ZNoYuI+Nq5MqWBr+chMrS/RkXpNzQCApHEhOt2aY8EJgqwHLkJ"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <nav class="topbar">
      <div class="topbar-inner">
        <a class="logo" href="index.html">üçΩÔ∏è Lunsj</a>
        <div>
          <button id="add-lunchplace-btn" class="btn btn-primary btn-small">Legg til lunsjsted</button>
          <a class="link-button" href="index.html">Til forsiden</a>
        </div>
      </div>
    </nav>

    <header class="hero">
      <div class="hero-inner">
        <h1>Alle lunsjsteder</h1>
        <div class="hero-search">
          <input
            type="text"
            id="search-input"
            name="search"
            placeholder="S√∏k etter bedrift eller sted..."
            hx-get="/api/lunchplaces"
            hx-target="#lunchplaces-list"
            hx-trigger="input changed delay:300ms"
            hx-include="#sort-select"
          />
        </div>
      </div>
    </header>

    <main id="main-content">
      <section id="filter-section">
        <h2>S√∏k og filtrer</h2>
        <div class="filter-controls">
          <input
            type="text"
            placeholder="S√∏k etter bedrift eller sted..."
            name="search"
            hx-get="/api/lunchplaces"
            hx-target="#lunchplaces-list"
            hx-trigger="input changed delay:300ms"
            hx-include="#sort-select"
          />
          <select
            id="sort-select"
            name="sort"
            hx-get="/api/lunchplaces"
            hx-target="#lunchplaces-list"
            hx-trigger="change"
          >
            <option value="company">Sorter etter bedrift</option>
            <option value="rating">Sorter etter vurdering</option>
            <option value="location">Sorter etter sted</option>
            <option value="servingType">Sorter etter serveringstype</option>
          </select>
        </div>
      </section>

      <section id="lunchplaces-section">
        <h2>Lunsjsteder</h2>
        <div
          id="lunchplaces-list"
          class="lunchplaces-grid"
          hx-get="/api/lunchplaces"
          hx-trigger="load"
        >
        </div>
      </section>
    </main>

    <!-- Add Lunchplace Modal (same as index) -->
    <div id="add-lunch-modal" class="modal" aria-hidden="true">
      <div class="modal-content">
        <span class="close" data-close-add>&times;</span>
        <h3>Legg til nytt lunsjsted</h3>
        <form
          id="add-lunchplace-form"
          hx-post="/api/lunchplace"
          hx-swap="none"
          hx-on::after-request="closeAddLunchModal(); this.reset();"
        >
          <div class="form-group">
            <label for="add-company-name">Bedrift/Organisasjon</label>
            <input type="text" id="add-company-name" name="company" required />
          </div>
          <div class="form-group">
            <label for="add-location">Sted</label>
            <input type="text" id="add-location" name="location" required />
          </div>
          <div class="form-group">
            <label for="add-serving-type">Serveringstype</label>
            <select id="add-serving-type" name="servingType" required>
              <option value="">Velg serveringstype</option>
              <option value="l√∏svekt">L√∏svekt buffet</option>
              <option value="all-you-can-eat">All you can eat buffet</option>
              <option value="a-la-carte">√Ä la carte</option>
              <option value="kiosk">Kiosk</option>
              <option value="meal-of-the-day">Dagens rett</option>
              <option value="cafeteria">Kafeteria</option>
              <option value="other">Annet</option>
            </select>
          </div>
          <div class="form-group">
            <label for="add-price-per-serving">Pris per porsjon (kr)</label>
            <input type="number" id="add-price-per-serving" name="pricePerServing" min="0" step="0.01" />
          </div>
          <div class="form-group">
            <label for="add-price-per-month">Pris per m√•ned (kr)</label>
            <input type="number" id="add-price-per-month" name="pricePerMonth" min="0" step="0.01" />
          </div>
          <div class="form-group">
            <label for="add-description">Beskrivelse</label>
            <textarea id="add-description" name="description" rows="3"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Legg til</button>
        </form>
      </div>
    </div>

    <footer>
      <p>&copy; 2024 Lunsj - Lunsjsteder i Norge</p>
    </footer>
    <script type="module" src="app.js"></script>
  </body>
  </html>


