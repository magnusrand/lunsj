<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lunsj - Arbeidsplassantiner i Norge</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>üçΩÔ∏è Lunsj</h1>
        <p>Finn og vurder arbeidsplassantiner i Norge</p>
    </header>

    <main>
        <!-- Add New Canteen Section -->
        <section id="add-canteen-section">
            <h2>Legg til ny kantine</h2>
            <form id="add-canteen-form">
                <div class="form-group">
                    <label for="canteen-name">Kantinens navn:</label>
                    <input type="text" id="canteen-name" required>
                </div>
                <div class="form-group">
                    <label for="company-name">Bedrift/Organisasjon:</label>
                    <input type="text" id="company-name" required>
                </div>
                <div class="form-group">
                    <label for="location">Sted:</label>
                    <input type="text" id="location" required>
                </div>
                <div class="form-group">
                    <label for="description">Beskrivelse:</label>
                    <textarea id="description" rows="3"></textarea>
                </div>
                <button type="submit">Legg til kantine</button>
            </form>
        </section>

        <!-- Filter Section -->
        <section id="filter-section">
            <h2>S√∏k og filtrer</h2>
            <div class="filter-controls">
                <input type="text" id="search-input" placeholder="S√∏k etter kantine eller sted...">
                <select id="sort-select">
                    <option value="name">Sorter etter navn</option>
                    <option value="rating">Sorter etter vurdering</option>
                    <option value="location">Sorter etter sted</option>
                </select>
            </div>
        </section>

        <!-- Canteens List Section -->
        <section id="canteens-section">
            <h2>Kantiner</h2>
            <div id="canteens-list" class="canteens-grid">
                <!-- Canteens will be loaded here dynamically -->
            </div>
        </section>
    </main>

    <!-- Rating Modal -->
    <div id="rating-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Vurder kantine</h3>
            <div id="modal-canteen-info"></div>
            <form id="rating-form">
                <div class="rating-input">
                    <label>Vurdering (1-5 stjerner):</label>
                    <div class="star-rating">
                        <input type="radio" id="star5" name="rating" value="5">
                        <label for="star5">‚òÖ</label>
                        <input type="radio" id="star4" name="rating" value="4">
                        <label for="star4">‚òÖ</label>
                        <input type="radio" id="star3" name="rating" value="3">
                        <label for="star3">‚òÖ</label>
                        <input type="radio" id="star2" name="rating" value="2">
                        <label for="star2">‚òÖ</label>
                        <input type="radio" id="star1" name="rating" value="1">
                        <label for="star1">‚òÖ</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="rating-comment">Kommentar (valgfri):</label>
                    <textarea id="rating-comment" rows="3" placeholder="Del din opplevelse..."></textarea>
                </div>
                <button type="submit">Send vurdering</button>
            </form>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 Lunsj - Arbeidsplassantiner i Norge</p>
    </footer>

    <!-- Firebase SDKs -->
    <script type="module">
        try {
            // Import the functions you need from the SDKs you need
            const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js');
            const { getFirestore, collection, addDoc, getDocs, query, orderBy, updateDoc, doc, increment, arrayUnion } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js');

            // Firebase configuration (users will need to replace with their own)
            const firebaseConfig = {
                // Replace with your Firebase config
                apiKey: "your-api-key",
                authDomain: "your-project.firebaseapp.com",
                projectId: "your-project-id",
                storageBucket: "your-project.appspot.com",
                messagingSenderId: "123456789",
                appId: "your-app-id"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);

            // Make Firebase available globally
            window.db = db;
            window.firestore = { collection, addDoc, getDocs, query, orderBy, updateDoc, doc, increment, arrayUnion };
            window.firebaseReady = true;
            
            // Dispatch event to let app know Firebase is ready
            window.dispatchEvent(new Event('firebaseReady'));
        } catch (error) {
            console.log('Firebase CDN not available, running in demo mode:', error.message);
            window.firebaseReady = false;
            // Dispatch event to let app know to use demo mode
            window.dispatchEvent(new Event('firebaseReady'));
        }
    </script>
    <script src="app.js"></script>
</body>
</html>